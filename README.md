# 医学报告处理工具集

包含三个主要工具：
1. **结构化提取工具** - 从医学报告中提取结构化字段
2. **患者友好化工具** - 将医学报告转换为患者易懂的语言
3. **微调数据集转换工具** - 将 CSV 数据转换为模型微调所需的 JSONL 格式

## 📖 文档

- **[综合使用指南](./综合使用指南.md)** ⭐ **推荐** - 整合了所有工具的完整说明
- [结构化提取详细指南](./使用指南.md) - 结构化提取工具详细说明
- [患者友好化使用指南](./患者友好化使用指南.md) - 患者友好化工具说明
- [微调数据集转换指南](./微调数据集转换_快速开始.md) - 微调数据集转换说明

## 🚀 快速开始

### 工具1：结构化提取

```powershell
# 1. 设置 API Key
$env:ALIYUN_API_KEY = "sk-your-aliyun-key"

# 2. 运行提取
python -m rcc_extract.cli `
  --provider aliyun `
  --model "qwen-plus" `
  --input "工作簿2.csv" `
  --text-col "检查所见" `
  --id-col "门诊号/住院号"
```

### 工具2：患者友好化（新功能）✨

```powershell
# 1. 设置 API Key
$env:ALIYUN_API_KEY = "sk-your-aliyun-key"

# 2. 运行患者友好化转换
python patient_friendly_cli.py `
  --provider aliyun `
  --model "qwen-plus" `
  --input "工作簿2.csv" `
  --text-col "检查所见" `
  --id-col "门诊号/住院号"
```

### 工具3：微调数据集转换

```powershell
# 将 CSV 转换为微调数据集格式
python convert_to_finetune.py `
  --input "数据.csv" `
  --system "你是一名医学影像分析助手" `
  --user-col "检查所见" `
  --assistant-col "提取结果" `
  --output "finetune.jsonl"
```

## ✨ 核心特性

### 结构化提取工具
- ✅ **多 API 供应商**：SiliconFlow、阿里云百炼、OpenAI、DeepSeek、钱多多
- ✅ **模板化提取**：肾癌、肺癌、通用，支持自定义模板
- ✅ **双模式运行**：同步模式（实时进度）+ 批量模式（后台处理）
- ✅ **智能错误处理**：自动 429 重试、配额管理

### 患者友好化工具（新）
- ✅ **通俗易懂**：将专业术语转换为日常语言
- ✅ **温和语气**：适合患者阅读
- ✅ **支持多 API**：与提取工具共享 API 配置
- ✅ **灵活配置**：可自定义提示词和参数

### 微调数据集转换工具（新）
- ✅ **标准格式**：生成 JSONL 格式的微调数据
- ✅ **灵活映射**：支持单列/多列映射到 system/user/assistant
- ✅ **简单易用**：一行命令完成转换
- ✅ **兼容主流平台**：SiliconFlow、阿里云百炼等

## 📚 更多信息

- **[综合使用指南](./综合使用指南.md)** ⭐ **推荐** - 整合了所有工具的完整说明
- [结构化提取详细指南](./使用指南.md) - 结构化提取工具详细说明
- [患者友好化使用指南](./患者友好化使用指南.md) - 患者友好化工具说明
- [微调数据集转换指南](./微调数据集转换_快速开始.md) - 微调数据集转换说明

---

**开始使用 → [综合使用指南.md](./综合使用指南.md)** ⭐

